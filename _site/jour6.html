<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Variance</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="css/styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="intro.html">Introduction</a>
</li>
<li>
  <a href="jour1.html">univariées</a>
</li>
<li>
  <a href="jour2.html">bivariées</a>
</li>
<li>
  <a href="jour3.html">régression </a>
</li>
<li>
  <a href="jour4.html">khi2</a>
</li>
<li>
  <a href="jour5.html">bases R</a>
</li>
<li>
  <a href="jour6.html">variance</a>
</li>
<li>
  <a href="jour7.html">multivariées 1</a>
</li>
<li>
  <a href="jour8.html">multivariées 2</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/beababa/01_stat">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Variance</h1>

</div>


<div id="intro-rappels-divers" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Intro : rappels
divers</h1>
<div id="théorie" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Théorie</h2>
<ul>
<li><p>le khi2, la régression, et la variance</p></li>
<li><p>démarche générale</p></li>
</ul>
<p>Avec le khi2, on a vu surtout le test et sa significativité.</p>
<p>Avec la régression, on a abordé uniquement le coefficient de
corrélation sans montrer le test.</p>
<p>Avec la variance, nous allons aborder test, significativité et
intensité.</p>
</div>
<div id="outils" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Outils</h2>
<ul>
<li><p>xls ou csv</p></li>
<li><p>libre office ou R</p></li>
</ul>
</div>
</div>
<div id="donnée-et-objet-de-lexercice" class="section level1"
number="2">
<h1><span class="header-section-number">2</span> Donnée et objet de
l’exercice</h1>
<p>La variance est utilisée en géographie pour tester des groupements
spatiaux.</p>
<div id="hypothèse" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Hypothèse</h2>
<p>Nous allons étudier la relation entre une variable quantitative et
une donnée géographique.</p>
<p>R va nous permettre de mettre en place la donnée d’exemple.</p>
</div>
<div id="préparer-la-donnée" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Préparer la
donnée</h2>
<div id="que-faut-il-faire" class="section level3" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Que faut-il faire
?</h3>
<p>Choisir au moins deux entités administratives, pour nous, le 93 et le
92 et observer si l’épargne nette est équivalente.</p>
<p>Il s’agit de l’épargne disponible pour financer l’investissement des
collectivités.</p>
<p><img src="img/dataVariance.png" /></p>
</div>
<div id="remarques-sur-r" class="section level3" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Remarques sur
R</h3>
<ul>
<li><p>opérateur d’assignation</p></li>
<li><p>les accolades pour l’indexation</p></li>
<li><p>le $ pour la variable</p></li>
<li><p>la complétion avec tabulation</p></li>
</ul>
<p>Parcours du script et exercice moodle pour voir si c’est compris.</p>
</div>
<div id="le-script" class="section level3" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Le script</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># lecture du fichier. Quelle remarque faire ?</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>data <span class="ot">&lt;-</span>  <span class="fu">read.csv2</span>(<span class="st">&quot;data/variance.csv&quot;</span>, <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8&quot;</span>, <span class="at">dec =</span><span class="st">&quot;.&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># on ne conserve que le montant par habitant</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">names</span> (data)</span></code></pre></div>
<pre><code>##  [1] &quot;Exercice&quot;                             
##  [2] &quot;Outre.mer&quot;                            
##  [3] &quot;Code.Insee.2024.Région&quot;               
##  [4] &quot;Nom.2024.Région&quot;                      
##  [5] &quot;Code.Insee.2024.Département&quot;          
##  [6] &quot;Nom.2024.Département&quot;                 
##  [7] &quot;Code.Siren.2024.EPCI&quot;                 
##  [8] &quot;Nom.2024.EPCI&quot;                        
##  [9] &quot;Strate.population.2024&quot;               
## [10] &quot;Commune.rurale&quot;                       
## [11] &quot;Commune.de.montagne&quot;                  
## [12] &quot;Commune.touristique&quot;                  
## [13] &quot;Tranche.revenu.par.habitant&quot;          
## [14] &quot;Présence.QPV&quot;                         
## [15] &quot;Code.Insee.2024.Commune&quot;              
## [16] &quot;Nom.2024.Commune&quot;                     
## [17] &quot;Catégorie&quot;                            
## [18] &quot;Code.Siren.Collectivité&quot;              
## [19] &quot;Code.Insee.Collectivité&quot;              
## [20] &quot;Siret.Budget&quot;                         
## [21] &quot;Libellé.Budget&quot;                       
## [22] &quot;Type.de.budget&quot;                       
## [23] &quot;Nomenclature&quot;                         
## [24] &quot;Agrégat&quot;                              
## [25] &quot;Montant&quot;                              
## [26] &quot;Montant.en.millions&quot;                  
## [27] &quot;Population.totale&quot;                    
## [28] &quot;Montant.en...par.habitant&quot;            
## [29] &quot;Compte.2024.Disponible&quot;               
## [30] &quot;code_type_budget&quot;                     
## [31] &quot;ordre_analyse1_section1&quot;              
## [32] &quot;ordre_analyse1_section2&quot;              
## [33] &quot;ordre_analyse1_section3&quot;              
## [34] &quot;ordre_analyse2_section1&quot;              
## [35] &quot;ordre_analyse2_section2&quot;              
## [36] &quot;ordre_analyse2_section3&quot;              
## [37] &quot;ordre_analyse3_section1&quot;              
## [38] &quot;ordre_analyse3_section2&quot;              
## [39] &quot;ordre_analyse3_section3&quot;              
## [40] &quot;ordre_analyse4_section1&quot;              
## [41] &quot;annee_join&quot;                           
## [42] &quot;Population.totale.du.dernier.exercice&quot;</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># colonnes 6 et 22, 16 pour avoir le nom de la commune</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>sel <span class="ot">&lt;-</span> data [, <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">28</span>,<span class="dv">16</span>)]</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co"># liste des dpts</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">unique</span>(sel<span class="sc">$</span>Nom.<span class="fl">2024.</span>Département)</span></code></pre></div>
<pre><code>## [1] &quot;Hauts-de-Seine&quot;    &quot;Seine-Saint-Denis&quot;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># combien de communes  par dpt ?</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">table</span>(sel<span class="sc">$</span>Nom.<span class="fl">2024.</span>Département)</span></code></pre></div>
<pre><code>## 
##    Hauts-de-Seine Seine-Saint-Denis 
##                36                40</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># répartition des communes par dpt ok, on aura quasiment autant de valeurs pour le 92 et le 93</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">names</span> (sel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;dpt&quot;</span>, <span class="st">&quot;montant&quot;</span>, <span class="st">&quot;commune&quot;</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co"># on renomme les variables plus simplement</span></span></code></pre></div>
</div>
</div>
</div>
<div id="représentation-graphique" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Représentation
graphique</h1>
<div id="la-commande-boxplot" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> La commande
boxplot</h2>
<p>La boite à moustaches permet de comparer rapidement des
distributions. Les moustaches montrent les 1ers et 9e déciles. Les
limites des boites correspondent au 1e et 3e quartile Le trait indique
la médiane. Les valeurs aberrantes sont les points isolés.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">boxplot</span>(sel<span class="sc">$</span>montant<span class="sc">~</span>sel<span class="sc">$</span>dpt )</span></code></pre></div>
<p><img src="jour6_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Un peu de couleur et des titres</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">boxplot</span>(sel<span class="sc">$</span>montant<span class="sc">~</span>sel<span class="sc">$</span>dpt, <span class="at">xlab =</span><span class="st">&quot;Département&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;montant épargne nette (euros par hbt)&quot;</span>,</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>        <span class="at">col=</span><span class="fu">rainbow</span>(<span class="dv">2</span>))</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co"># Affichage des moyennes sur les boites à moustache</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>moyenne <span class="ot">&lt;-</span> <span class="fu">tapply</span>(sel<span class="sc">$</span>montant, sel<span class="sc">$</span>dpt, mean)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="fu">points</span>(moyenne, <span class="at">pch =</span> <span class="dv">2</span>,  <span class="at">col=</span><span class="st">&quot;black&quot;</span>, <span class="at">cex =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="jour6_files/figure-html/unnamed-chunk-2-2.png" width="672" /></p>
<p>Ce graphique permet de comparer 2 départements. Les variations entre
les groupes sont-elles plus importantes que les variations au sein des
groupes eux-mêmes ? A priori, dans le 92, l’amplitude est plus étendue.
Les distributions sont très symétriques (la médiane semble au centre de
la boite). Il y a autant de communes avec une épargne nette basse
qu’avec une épargne dette élevée.</p>
<p>Il existe une très forte valeur négative pour chacun des 2
départements.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>sel [sel<span class="sc">$</span>montant <span class="sc">&lt;</span> <span class="dv">0</span>,]</span></code></pre></div>
<pre><code>##                  dpt     montant               commune
## 1     Hauts-de-Seine   -9.255591                Antony
## 7     Hauts-de-Seine  -96.019408      Châtenay-Malabry
## 8     Hauts-de-Seine  -68.760843             Châtillon
## 19    Hauts-de-Seine  -41.607404      Levallois-Perret
## 26    Hauts-de-Seine -654.082223   Le Plessis-Robinson
## 29    Hauts-de-Seine  -47.983874           Saint-Cloud
## 30    Hauts-de-Seine -187.247043                Sceaux
## 35    Hauts-de-Seine  -47.189691         Ville-d&#39;Avray
## 36    Hauts-de-Seine  -49.330382 Villeneuve-la-Garenne
## 38 Seine-Saint-Denis  -32.902027      Aulnay-sous-Bois
## 43 Seine-Saint-Denis -168.095386            Le Bourget
## 69 Seine-Saint-Denis  -43.027696  Saint-Ouen-sur-Seine
## 71 Seine-Saint-Denis  -35.108860                Stains</code></pre>
<p>Les deux communes sont Le Plessis-Robinson pour le 92 et Le Bourget
pour le 93</p>
<p>En fait, pour les Hauts de Seine, cette valeur décentre un peu la
moyenne.</p>
<p>Mis à part l’amplitude, les deux départements se ressemblent.</p>
</div>
<div id="correction-exercice-sur-la-boite-à-moustaches"
class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Correction exercice
sur la boite à moustaches</h2>
<p>Le but de l’exercice était d’utiliser un filtre permettant de faire
une <em>jolie</em> boite à moustaches.</p>
<p>Mais il s’agissait également de faire une rapide analyse en utilisant
les noms des variables.</p>
<p>Pour cela, un premier exercice avait été fait en cours sur l’analyse
faite en classe. <em>Boîte à moustaches - analyse</em> (26 réponses sur
60 étudiants présents environ)</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/boiteMoustacheCorrection.csv&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">t</span>(data))</span></code></pre></div>
<table>
<colgroup>
<col width="3%" />
<col width="75%" />
<col width="20%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left">exemple</td>
<td align="left">bon</td>
<td align="left">mauvais</td>
</tr>
<tr class="even">
<td align="left">amplitude</td>
<td align="left">l’étendue des données pour le 92 est beaucoup plus
importante que celle du 93. on peut donc dire que le 92 est plus
inégalitaire que le 93 concernant les dettes de ses habitants.
l’amplitude importante signifie qu’il y a un écart important entre la
plus grande dette et la plus faible contrairement au 93 ou elles sont
plus rapprochées.</td>
<td align="left">L’amplitude des distributions peut s’évaluer par les
limites des premier et neuvième déciles.</td>
</tr>
<tr class="odd">
<td align="left">médiane</td>
<td align="left">la médiane girondine est plus haute que la médiane
landaise</td>
<td align="left">La médiane de distribution ce situe au centre de nos
données 50% au dessus 50 % en dessous</td>
</tr>
<tr class="even">
<td align="left">valeur.aberrante</td>
<td align="left">dans le 92, il y a une valeur très fortement aberrante,
il n’y a pas d’équivalent dans le 93</td>
<td align="left">Les valeurs hors des boîtes sont des valeurs
aberrantes</td>
</tr>
</tbody>
</table>
<p>Globalement, les étudiants ont réussi à faire les 2 séries de boites
à moustaches (avec et sans filtre).</p>
<p>A noter, des étudiants qui utilisent un histogramme, et un autre qui
n’a pas réussi à ouvrir correctement son fichier.</p>
<p>Le commentaire les plus intéressant :</p>
<ul>
<li>une opposition entre départements ruraux et département avec une
grande métropole.</li>
</ul>
</div>
</div>
<div id="la-variance" class="section level1" number="4">
<h1><span class="header-section-number">4</span> La variance</h1>
<div id="rappel" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Rappel</h2>
<p>Pour mémoire, la variance est le carré de la moyenne des écarts à la
moyenne.</p>
<p>Dans le tableur, nous aurions fait une série de tableaux de calcul
autour des écarts à la moyennes (en mettant des carrés). Dans R, c’est
une formule var.</p>
</div>
<div id="calcul-de-la-variance-avec-et-sans-la-formule"
class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Calcul de la variance
avec et sans la formule</h2>
<p>Pour les 2 dpts</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">var</span>(sel<span class="sc">$</span>montant)</span></code></pre></div>
<pre><code>## [1] 19742.05</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Pour l&#39;ensemble de la zone, sans formule</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">mean</span>((sel<span class="sc">$</span>montant <span class="sc">-</span> <span class="fu">mean</span>(sel<span class="sc">$</span>montant))<span class="sc">^</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 19482.28</code></pre>
<p>Le résultat est légèrement différent, car le logiciel pondère la
variance en soustrayant 1 à l’effectif. Plus la série est grande, moins
cela a d’importance.</p>
<p>Pour chaque dpt</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># on utilise un tapply</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="fu">tapply</span>(sel<span class="sc">$</span>montant, sel<span class="sc">$</span>dpt,var)</span></code></pre></div>
<pre><code>##    Hauts-de-Seine Seine-Saint-Denis 
##         32194.767          8874.249</code></pre>
<p>La variance est quatre fois plus importante dans le 92 que dans le
93.</p>
</div>
</div>
<div id="analyse-de-la-variance" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Analyse de la
variance</h1>
<p>Attention à bien distinguer la <em>variance</em> de la
<em>variation</em>.</p>
<p>La première est la moyenne du carré des écarts, la seconde est juste
la somme du carré des écarts.</p>
<p>La <em>variation</em> est une quantité qui se décompose en :</p>
<ul>
<li><p>les <em>variations</em> à l’intérieur de chaque groupe (variation
intra groupe)</p></li>
<li><p>les <em>variations</em> entre les groupes (variation inter
groupe)</p></li>
</ul>
<p>La variation totale est la somme des deux. La significativité et
l’intensité sont calculées avec ces trois grandeurs.</p>
<p>significativité = rapport inter / intra</p>
<p>intensité = rapport inter / total</p>
<div id="la-formule-anova-dans-r" class="section level3" number="5.0.1">
<h3><span class="header-section-number">5.0.1</span> La formule ANOVA
dans R</h3>
<p>ANalyse Ordinaire de la VAriance</p>
<p>Sous R, il suffit de lancer une formule.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># transformation en variable de catégorie (une précaution)</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>sel<span class="sc">$</span>dpt <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(sel<span class="sc">$</span>dpt)</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>modele <span class="ot">&lt;-</span> <span class="fu">lm</span> (montant <span class="sc">~</span> dpt, <span class="at">data =</span> sel)</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="fu">anova</span>(modele)</span></code></pre></div>
<pre><code>## Analysis of Variance Table
## 
## Response: montant
##           Df  Sum Sq Mean Sq F value Pr(&gt;F)
## dpt        1    7741    7741  0.3889 0.5348
## Residuals 74 1472913   19904</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">anova</span>(modele)</span></code></pre></div>
<p>Sum Sq = la somme des carrés des écarts (SCE)</p>
<p>Mean Sq = la moyenne des carrés des écarts, c’est la variance sauf
qu’au lieu de faire une moyenne classique, on utilise <em>les degrés de
liberté</em> pour le dénominateur.</p>
<p>Pour la variation intergroupe, il s’agit du nombre de groupes (dans
notre cas, 92 et 93 -1)</p>
<p>Pour la variation intragroupe, l’effectif - le nombre de groupe.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co"># le nombre de lignes pour les 2 dpts - le nb de dpt</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="fu">length</span>(sel<span class="sc">$</span>dpt) <span class="sc">-</span> <span class="fu">length</span>(<span class="fu">unique</span>(sel<span class="sc">$</span>dpt))</span></code></pre></div>
<pre><code>## [1] 74</code></pre>
<p>La première ligne (dpt) c’est pour la variation inter-groupe</p>
<p>La deuxième (Residuals) c’est pour l’intérieur des groupes
(l’intra)</p>
<p>Que dire ce ces chiffres ?</p>
<p>Comme pour le khi2, on peut faire un test et calculer
l’intensité.</p>
</div>
<div id="significativité" class="section level3" number="5.0.2">
<h3><span class="header-section-number">5.0.2</span>
Significativité</h3>
<p>F value = Test de Fisher, c’est le test de significativité pour
l’analyse de la variance.</p>
<p>Le test est mesuré par le rapport entre la variation intergroupe et
la variation intragroupe (avec les degrés de liberté).</p>
<p>Si ce rapport est élevé, cela signifie que la variation intergroupe
est importante relativement à la variation intra, donc qu’il y a une
vraie différence entre les écarts à la moyenne des groupes.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># variation inter / variation intra.</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>test<span class="sc">$</span><span class="st">`</span><span class="at">Mean Sq</span><span class="st">`</span> [<span class="dv">1</span>] <span class="sc">/</span> test<span class="sc">$</span><span class="st">`</span><span class="at">Mean Sq</span><span class="st">`</span> [<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 0.3889143</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>test<span class="sc">$</span><span class="st">`</span><span class="at">F value</span><span class="st">`</span></span></code></pre></div>
<pre><code>## [1] 0.3889143        NA</code></pre>
<p>Plus la variation intra augmente, plus le rapport diminue, moins il y
a de différence entre les groupes.</p>
<div id="la-table-de-fisher" class="section level4" number="5.0.2.1">
<h4><span class="header-section-number">5.0.2.1</span> La table de
fisher</h4>
<p>Comme pour le khi2, on compare à un test obtenu par le hasard (donc
une table).</p>
<p><img src="img/fisher.jpg" /> F calculé</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>Ftable <span class="ot">&lt;-</span> <span class="fu">qf</span>(<span class="at">p=</span>.<span class="dv">05</span>, <span class="at">df1=</span><span class="dv">1</span>, <span class="at">df2=</span><span class="dv">74</span>, <span class="at">lower.tail=</span><span class="cn">FALSE</span>)</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>Fcalcule <span class="ot">&lt;-</span> test<span class="sc">$</span><span class="st">`</span><span class="at">Mean Sq</span><span class="st">`</span> [<span class="dv">1</span>] <span class="sc">/</span> test<span class="sc">$</span><span class="st">`</span><span class="at">Mean Sq</span><span class="st">`</span> [<span class="dv">2</span>]</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>Ftable</span></code></pre></div>
<pre><code>## [1] 3.97023</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>Fcalcule</span></code></pre></div>
<pre><code>## [1] 0.3889143</code></pre>
<p>Le F théorique est supérieur au F calculé pour un risque de 5 %</p>
<p>Il y a indépendance entre les départements et la distribution du
montant de l’épargne nette.</p>
</div>
<div id="avec-r-importance-de-la-p-value" class="section level4"
number="5.0.2.2">
<h4><span class="header-section-number">5.0.2.2</span> Avec R,
importance de la p-value</h4>
<p>Le chiffre le plus rapide à analyser, c’est la p-value, il indique la
taille de la différence entre les moyennes des 2 départements</p>
<p>Plus il est petit, plus il y a de différence, plus il est gros, plus
les écarts aux moyennes se ressemblent et donc l’hypothèse
d’indépendance peut être rejetée.</p>
<p>C’est la même logique que pour le khi2 (cf exemple khi2 dans
l’introduction aux bivariées).</p>
<p>Dans notre cas, la pvalue indique un risque important. Concrètement,
il faudrait aller chercher la table du risque à % de Fisher.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">qf</span>(<span class="at">p=</span>.<span class="dv">5348</span>, <span class="at">df1=</span><span class="dv">1</span>, <span class="at">df2=</span><span class="dv">74</span>, <span class="at">lower.tail=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] 0.3888919</code></pre>
<p>On a plus de 50 % de chance de se tromper si on rejette
l’indépendance, il ne faut donc pas la rejeter.</p>
<p>93 92 ont une même répartition de la dette</p>
</div>
</div>
<div id="intensité" class="section level3" number="5.0.3">
<h3><span class="header-section-number">5.0.3</span> Intensité</h3>
<p>On mesure également l’intensité, la proportion de la variation
expliquée par les modalités dans la variation totale (entre 0 et 1)</p>
<p>variation intergroupe / variation totale</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>test<span class="sc">$</span><span class="st">`</span><span class="at">Mean Sq</span><span class="st">`</span> [<span class="dv">1</span>] <span class="sc">/</span> <span class="fu">sum</span>(test<span class="sc">$</span><span class="st">`</span><span class="at">Mean Sq</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## [1] 0.2800132</code></pre>
<p>L’intensité est faible, un plus d’un quart de la variation est
expliquée par la structure spatiale.</p>
</div>
</div>
<div id="exercices-dapplication" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Exercices
d’application</h1>
<div id="du-département-à-la-région" class="section level2"
number="6.1">
<h2><span class="header-section-number">6.1</span> Du département à la
région</h2>
<p>Le choix est fait de comparer les variations de chaque région.</p>
<div id="hypothèse-1" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> Hypothèse</h3>
<p>Il s’agit d’observer s’il y a une variation entre les régions sur
l’ensemble du pays au niveau de l’épargne.</p>
<p>L’hypothèse nulle, comme d’habitude, est qu’il n’y en a pas.</p>
</div>
<div id="script" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> Script</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">&quot;data/varianceSubention.csv&quot;</span>, <span class="at">dec =</span> <span class="st">&quot;.&quot;</span>)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>sel <span class="ot">&lt;-</span> data [,<span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">28</span>)]</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="fu">head</span>(sel)</span></code></pre></div>
<pre><code>##        Nom.2024.Région Montant.en...par.habitant
## 1      Hauts-de-France                  40.96386
## 2      Hauts-de-France                 123.17000
## 3 Auvergne-Rhône-Alpes                  60.50586
## 4            Grand Est                 101.28546
## 5            Grand Est                 145.32277
## 6            Grand Est                  51.57234</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu">names</span>(sel) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;region&quot;</span>, <span class="st">&quot;montant&quot;</span>)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>(tab <span class="ot">&lt;-</span> <span class="fu">table</span>(sel<span class="sc">$</span>region))</span></code></pre></div>
<pre><code>## 
##       Auvergne-Rhône-Alpes    Bourgogne-Franche-Comté 
##                       4024                       3697 
##                   Bretagne        Centre-Val de Loire 
##                       1205                       1755 
##                      Corse                  Grand Est 
##                        360                       5115 
##                 Guadeloupe                     Guyane 
##                         32                         22 
##            Hauts-de-France              Île-de-France 
##                       3776                       1267 
##                 La Réunion                 Martinique 
##                         24                         34 
##                    Mayotte                  Normandie 
##                         17                       2649 
##         Nouvelle-Aquitaine                  Occitanie 
##                       4302                       4453 
##           Pays de la Loire Provence-Alpes-Côte d&#39;Azur 
##                       1231                        945</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="co"># Que remarque t on au niveau du nombre de dpts par région ?</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>(region <span class="ot">&lt;-</span> <span class="fu">names</span>(tab) [tab <span class="sc">&gt;</span> <span class="dv">2000</span>])</span></code></pre></div>
<pre><code>## [1] &quot;Auvergne-Rhône-Alpes&quot;    &quot;Bourgogne-Franche-Comté&quot;
## [3] &quot;Grand Est&quot;               &quot;Hauts-de-France&quot;        
## [5] &quot;Normandie&quot;               &quot;Nouvelle-Aquitaine&quot;     
## [7] &quot;Occitanie&quot;</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>sel2 <span class="ot">&lt;-</span> sel [sel<span class="sc">$</span>region <span class="sc">%in%</span> region,]</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="fu">table</span>(sel2<span class="sc">$</span>region)</span></code></pre></div>
<pre><code>## 
##    Auvergne-Rhône-Alpes Bourgogne-Franche-Comté               Grand Est 
##                    4024                    3697                    5115 
##         Hauts-de-France               Normandie      Nouvelle-Aquitaine 
##                    3776                    2649                    4302 
##               Occitanie 
##                    4453</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;img/varianceRegion.png&quot;</span>, <span class="at">width =</span> <span class="dv">6000</span>, <span class="at">height =</span> <span class="dv">2000</span>, <span class="at">res =</span> <span class="dv">600</span>)</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a><span class="fu">boxplot</span>(sel<span class="sc">$</span>montant<span class="sc">~</span>sel<span class="sc">$</span>region, <span class="at">las =</span><span class="dv">2</span>)</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;img/varianceRegion2.png&quot;</span>, <span class="at">width =</span> <span class="dv">6000</span>, <span class="at">height =</span> <span class="dv">2000</span>, <span class="at">res =</span> <span class="dv">600</span>)</span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a><span class="fu">boxplot</span>(sel2<span class="sc">$</span>montant<span class="sc">~</span>sel2<span class="sc">$</span>region, <span class="at">las =</span><span class="dv">2</span>)</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
<p><img src="img/varianceRegion.png" /> <img
src="img/varianceRegion2.png" /></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="fu">summary</span>(sel2<span class="sc">$</span>montant)</span></code></pre></div>
<pre><code>##     Min.  1st Qu.   Median     Mean  3rd Qu.     Max.     NA&#39;s 
##     0.00    36.66    72.27   104.22   135.23 13004.32        6</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a>sel3 <span class="ot">&lt;-</span> sel2 [sel2<span class="sc">$</span>montant <span class="sc">&lt;</span> <span class="dv">200</span> <span class="sc">&amp;</span> sel2<span class="sc">$</span>montant <span class="sc">&gt;</span> <span class="sc">-</span> <span class="dv">200</span>,]</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a><span class="fu">png</span>(<span class="st">&quot;img/varianceRegion3.png&quot;</span>, <span class="at">width =</span> <span class="dv">6000</span>, <span class="at">height =</span> <span class="dv">2000</span>, <span class="at">res =</span> <span class="dv">600</span>)</span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a><span class="fu">boxplot</span>(sel3<span class="sc">$</span>montant<span class="sc">~</span>sel3<span class="sc">$</span>region, <span class="at">las=</span><span class="dv">2</span>, <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a><span class="fu">dev.off</span>()</span></code></pre></div>
<pre><code>## png 
##   2</code></pre>
<p><img src="img/varianceRegion3.png" /></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>modele <span class="ot">&lt;-</span> <span class="fu">lm</span> (montant <span class="sc">~</span> region, <span class="at">data =</span> sel2)</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a><span class="fu">anova</span>(modele)</span></code></pre></div>
<pre><code>## Analysis of Variance Table
## 
## Response: montant
##              Df     Sum Sq Mean Sq F value    Pr(&gt;F)    
## region        6    6927580 1154597  30.661 &lt; 2.2e-16 ***
## Residuals 28003 1054498739   37657                      
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="co"># Intensité</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">anova</span>(modele)</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a>test<span class="sc">$</span><span class="st">`</span><span class="at">Mean Sq</span><span class="st">`</span> [<span class="dv">1</span>] <span class="sc">/</span> <span class="fu">sum</span>(test<span class="sc">$</span><span class="st">`</span><span class="at">Mean Sq</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## [1] 0.9684156</code></pre>
<p>L’échelon régional permet d’expliquer 96% de la variation de la
dette, mais pas celui de département. (Mais on a conservé uniquement les
valeurs entre -200 et 200)</p>
</div>
</div>
</div>

<br><br><br><br><br><br><br><br><br><br><br><br>
<small><p>L5GEABIM Analyses bivariées et multivariées</p></small>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
